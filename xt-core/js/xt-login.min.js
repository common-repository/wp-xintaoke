jQuery(function(a){function g(){a.ajax({url:b[0].action,data:b.serialize(),type:"POST",cache:false,success:function(c){try{var e=a(document.createElement("div")).html(c)}catch(h){e=a("<div></div>")}c=a("#login_error",e[0]);if(c.length)a("#login_error",d).length?a("#login_error",d).replaceWith(c):b.before(c);else if(f)top.location=f;else top.location.reload()},error:function(c){a("p:first",b[0]).before(a(document.createElement("div")).html("<strong>ERROR</strong>: "+c.statusText).attr("id","login_error"));
activity.hide();fields.show()}})}var d=a("#login"),b=a("#loginform",d),f=a('input[name="redirect_to"]',b).val();a('input[name="redirect_to"]',b).val(b[0].action);a("#wp-submit").unbind("submit").unbind("click").bind("click",function(){g();return false})});