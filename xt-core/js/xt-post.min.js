jQuery(function(c){XT.login=function(b,d,f,e,h){if(!b){typeof e!="undefined"&&e({code:500,msg:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"});return false}if(!d){typeof e!="undefined"&&e({code:500,msg:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"});return false}c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_login",log:b,pwd:d,rememberme:f},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.addBrowserFavorite=function(b,d){try{if(window.sidebar)window.sidebar.addPanel(b,
d,"");else if(window.external||document.all)window.external.AddFavorite(d,b);else if(window.opera){c("a#bookmark").attr("href",d);c("a#bookmark").attr("title",b);c("a#bookmark").attr("rel","sidebar");c("a#bookmark").click()}else alert("\u52a0\u5165\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u4f7f\u7528Ctrl+D\u8fdb\u884c\u6dfb\u52a0")}catch(f){alert("\u52a0\u5165\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u4f7f\u7528Ctrl+D\u8fdb\u884c\u6dfb\u52a0")}return false};XT.taobaoError=function(b){if(b.hasOwnProperty("error_response"))if(b.error_response.hasOwnProperty("code"))if(b.error_response.code==
31){alert("\u8bf7\u5237\u65b0\u91cd\u8bd5");document.location.href=document.location.href.split("#")[0]}};XT.taobaoItemsRelateGet=function(b,d,f,e,h,g,k){if(typeof TOP!="undefined"){b={method:"taobao.taobaoke.items.relate.get",fields:"num_iid,title,nick,pic_url,price,click_url,commission,ommission_rate,commission_num,commission_volume,shop_click_url,seller_credit_score,item_location,volume",shop_type:e,max_count:h,relate_type:d,sort:g,outer_code:b};if(d==1||d==3)b.num_iid=f;else if(d==5)b.cid=f;else{k("");
return false}TOP.api(b,function(l){XT.taobaoError(l);k(l)})}else k("");return false};XT.taobaoItemsCouponGet=function(b,d){typeof TOP!="undefined"?TOP.api({method:"taobao.taobaoke.items.coupon.get",fields:"num_iid,coupon_price,commission_rate,commission",keyword:b,page_no:1,page_size:100},function(f){XT.taobaoError(f);d(f)}):d("");return false};XT.taobaoItemsConvert=function(b,d,f){typeof TOP!="undefined"?TOP.api({method:"taobao.taobaoke.widget.items.convert",fields:d,num_iids:b},function(e){XT.taobaoError(e);
f(e)}):f("");return false};XT.paipaikeItemGet=function(b,d,f){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_item_get_paipaike",id:b},success:function(e){typeof d!="undefined"&&d(e)},error:function(e,h,g){typeof f!="undefined"&&f(e,h,g)}})};XT.parseUrl=function(b){var d={};b.replace(/(\w+)=(\w+)/ig,function(f,e,h){d[e]=h});return d};XT.isPaipai=function(b){if(/auction\d?.paipai.com/i.test(b))return true;return false};XT.taobaoId=function(b){var d=0;if(/^\d{8,15}$/.test(b))return parseFloat(b);
if(b.match(/(.*\.?taobao.com(\/|$))|(.*\.?tmall.com(\/|$))/i)){b=XT.parseUrl(b);if(typeof b=="object"){d=b.id;if(d==null||d=="undefined"){d=b.item_num_id;if(d==null||d=="undefined"){d=b.default_item_id;if(d==null||d=="undefined")d=0}}}}return d};XT.shareURLSupport=function(b){var d=/ju.taobao.com/i,f=/tmall.com/i,e=/auction\d?.paipai.com/i,h=/buy.caomeipai.com\/goods/i,g=/www.360buy.com\/product/i,k=/product.dangdang.com\/Product.aspx\?product_id=/i,l=/book.360buy.com/i,m=/www.vancl.com\/StyleDetail/i,
n=/www.vancl.com\/Product/i,o=/vt.vancl.com\/item/i,p=/item.vancl.com\/\d+/i,q=/item.vt.vancl.com\/\d+/i,r=/mbaobao.com\/pshow/i,s=/item.buy.qq.com\/item/i,t=/[www|us].topshop.com\/webapp\/wcs\/stores\/servlet\/ProductDisplay/i,u=/quwan.com\/goods/i,v=/nala.com.cn\/product/i,w=/maymay.cn\/pitem/i,x=/asos.com/i,y=/www.100f1.com\/ProductInfo_/i,z=/www.gaojie.com\/product/i,A=/a.m.taobao.com\/i/i,B=/www.51yugou.com\//i;return/item(.[\w]+)?.taobao.com\/(.?)[item.htm|item_num_id|item_detail|itemID|item_id|default_item_id]/i.test(b)||
d.test(b)||f.test(b)||l.test(b)||g.test(b)||e.test(b)||h.test(b)||k.test(b)||m.test(b)||n.test(b)||o.test(b)||p.test(b)||q.test(b)||r.test(b)||t.test(b)||u.test(b)||v.test(b)||w.test(b)||x.test(b)||y.test(b)||z.test(b)||s.test(b)||A.test(b)||B.test(b)};XT.userCardGet=function(b,d,f){c.ajax({type:"post",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_user_card_get",userId:b},success:function(e){typeof d!="undefined"&&d(e)},error:function(e,h,g){typeof f!="undefined"&&f(e,h,g)}})};XT.itemGet=function(b,
d,f){c.ajax({type:"post",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_item_get",url:b},success:function(e){typeof d!="undefined"&&d(e)},error:function(e,h,g){typeof f!="undefined"&&f(e,h,g)}})};XT.shareFetch=function(b,d,f){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_share_fetch",url:b},success:function(e){typeof d!="undefined"&&d(e)},error:function(e,h,g){typeof f!="undefined"&&f(e,h,g)}})};XT.albumJoin=function(b,d,f,e,h){c.ajax({type:"post",dataType:"json",
url:XT.ajaxurl,data:{action:"xt_ajax_album_join",album_id:b,share_id:d,user_id:XT.userId,content:f},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.albumUpdate=function(b,d,f,e,h){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_album_update",album_id:b,title:d,content:f},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.albumAdd=function(b,d,f,e){c.ajax({type:"post",
dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_album_add",title:b,user_id:XT.userId,content:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};XT.userAlbumsGet=function(b,d,f,e,h,g){isShare=isFavorite=0;if(b=="favorite")isFavorite=1;else if(b=="share")isShare=1;c.ajax({type:"get",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_search_albums",user_id:d,page:f,album_per_page:e,isFavorite:isFavorite,isShare:isShare,isScroll:false},
success:function(k){typeof h!="undefined"&&h(k)},error:function(k,l,m){typeof g!="undefined"&&g(k,l,m)}})};XT.userShareAdd=function(b,d,f){b.action="xt_ajax_share_add";c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:b,success:function(e){typeof d!="undefined"&&d(e)},error:function(e,h,g){typeof f!="undefined"&&f(e,h,g)}})};XT.userSharesGet=function(b,d,f,e,h,g){var k=0,l=0,m=0;if(b=="favorite")k=1;else if(b=="share")l=1;else if(b=="home")m=1;c.ajax({type:"get",dataType:"html",url:XT.ajaxurl,
data:{action:"xt_ajax_search_shares",user_id:d,page:f,share_per_page:e,isHome:m,isFavorite:k,isShare:l,isScroll:true},success:function(n){typeof h!="undefined"&&h(n)},error:function(n,o,p){typeof g!="undefined"&&g(n,o,p)}})};XT.albumSharesGet=function(b,d,f,e,h,g){c.ajax({type:"get",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_search_shares",page:f,share_per_page:e,album_id:d,isScroll:true},success:function(k){typeof h!="undefined"&&h(k)},error:function(k,l,m){typeof g!="undefined"&&g(k,l,
m)}})};XT.commmentGet=function(b,d,f,e,h){parseInt(b)>0&&c.ajax({type:"post",dataType:"html",url:XT.ajaxurl,data:{action:f,share_id:b,page:d},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.commentAdd=function(b,d,f,e,h){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:b,share_id:d,user_id:XT.userId,content:f},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.favoriteAdd=
function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_favorite_add",id:b,user_id:XT.userId,type:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};XT.favoriteDelete=function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_favorite_delete",id:b,user_id:XT.userId,type:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};
XT.shareAlbumDelete=function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_share_album_delete",id:b,user_id:XT.userId,album_id:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};XT.follow=function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_follow",user_id:b,f_user_id:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,
g,k)}})};XT.unfollow=function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_unfollow",user_id:b,f_user_id:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};XT.usersGet=function(b,d,f,e,h,g,k){c.ajax({type:"get",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_search_users",page:e,user_per_page:h,s:b,follow:d,fans:f,isScroll:true},success:function(l){typeof g!="undefined"&&g(l)},error:function(l,m,n){typeof k!=
"undefined"&&k(l,m,n)}})};XT.updateShareCatalog=function(b,d,f,e){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_admin_share_catalog",id:b,cids:d},success:function(h){typeof f!="undefined"&&f(h)},error:function(h,g,k){typeof e!="undefined"&&e(h,g,k)}})};XT.sharesGetByCid=function(b,d,f,e,h){c.ajax({type:"get",dataType:"html",url:XT.ajaxurl,data:{action:"xt_ajax_search_shares",cid:b,page:d,share_per_page:f,no_found_rows:true,isScroll:false},success:function(g){typeof e!="undefined"&&
e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.unOrder=function(b,d,f,e,h){c.ajax({type:"post",dataType:"json",url:XT.ajaxurl,data:{action:"xt_ajax_unorder",platform:b,id:d,tradeId:f},success:function(g){typeof e!="undefined"&&e(g)},error:function(g,k,l){typeof h!="undefined"&&h(g,k,l)}})};XT.AtTip=function(b,d){b.data("popover")&&b.popover("destroy");b.popover({placement:"top",html:true,content:d}).popover("show")};XT.success=function(b){XT.tip("xt-success",b)};XT.error=function(b){XT.tip("xt-error",
b)};XT.tip=function(b,d){c("#X_Modal").length>0&&c("#X_Modal").data("modal")&&c("#X_Modal").modal("hide");c("#X_Modal-Iframe").length>0&&c("#X_Modal-Iframe").data("modal")&&c("#X_Modal-Iframe").modal("hide");c("#X_Modal-Tip").remove();c("body").append('<div id="X_Modal-Tip" class="modal '+b+'"><p>'+d+"</p></div>");var f=c("#X_Modal-Tip");f.modal({backdrop:false,keyboard:true});f.modal("show");setTimeout(function(){f.modal("hide")},2E3)};XT.modal=function(b,d,f,e){c("#X_Modal").length>0&&c("#X_Modal").data("modal")&&
c("#X_Modal").modal("hide");c("#X_Modal-Iframe").length>0&&c("#X_Modal-Iframe").data("modal")&&c("#X_Modal-Iframe").modal("hide");c("#X_Modal").remove();c("body").append('<div id="X_Modal" class="modal '+(typeof f!="undefined"?f:"")+'"><div class="modal-header"><a class="close" data-dismiss="modal" href="javascript:;">&times;</a><h3>'+b+'</h3></div><div class="modal-body" '+(typeof e!="undefined"?'style="height:'+e+'px"':"")+">"+d+'</div><div class="modal-footer"><a href="javascript:;" class="btn" data-dismiss="modal">\u5173\u95ed</a><a href="javascript:;" class="btn btn-primary">\u786e\u5b9a</a></div></div>');
c("#X_Modal").modal({backdrop:"static",keyboard:true});c("#X_Modal").modal("show")};XT.ajaxModalPost=function(b,d,f,e,h,g){c("#X_Modal").length>0&&c("#X_Modal").data("modal")&&c("#X_Modal").modal("hide");c("#X_Modal-Iframe").length>0&&c("#X_Modal-Iframe").data("modal")&&c("#X_Modal-Iframe").modal("hide");c("#X_Modal").remove();c("body").append('<div id="X_Modal" class="modal '+(typeof h!="undefined"?h:"")+'"><div class="modal-header"><a class="close" data-dismiss="modal" href="javascript:;">&times;</a><h3>'+
b+'</h3></div><div class="modal-body" '+(typeof g!="undefined"?'style="height:'+g+'px"':"")+'></div><div class="modal-footer"><a href="javascript:;" class="btn" data-dismiss="modal">\u5173\u95ed</a><a href="javascript:;" class="btn btn-primary">\u786e\u5b9a</a></div></div>');c("#X_Modal").modal({backdrop:"static",keyboard:false});c("#X_Modal").modal("show");c("#X_Modal").find(".modal-body").html('<p class="xt-loading"></p>');c.post(d,f,function(k){c("#X_Modal").find(".modal-body").html(k);typeof e==
"function"&&e()})};XT.ajaxModal=function(b,d,f,e,h){c("#X_Modal").length>0&&c("#X_Modal").data("modal")&&c("#X_Modal").modal("hide");c("#X_Modal-Iframe").length>0&&c("#X_Modal-Iframe").data("modal")&&c("#X_Modal-Iframe").modal("hide");c("#X_Modal").remove();c("body").append('<div id="X_Modal" class="modal '+(typeof e!="undefined"?e:"")+'"><div class="modal-header"><a class="close" data-dismiss="modal" href="javascript:;">&times;</a><h3>'+b+'</h3></div><div class="modal-body" '+(typeof h!="undefined"?
'style="height:'+h+'px"':"")+'></div><div class="modal-footer"><a href="javascript:;" class="btn" data-dismiss="modal">\u5173\u95ed</a><a href="javascript:;" class="btn btn-primary">\u786e\u5b9a</a></div></div>');c("#X_Modal").modal({backdrop:"static",keyboard:true});c("#X_Modal").modal("show");c("#X_Modal").find(".modal-body").html('<p class="xt-loading"></p>').load(d,function(){typeof f=="function"&&f()})};XT.iframeModal=function(b,d,f,e,h){c("#X_Modal").length>0&&c("#X_Modal").data("modal")&&c("#X_Modal").modal("hide");
c("#X_Modal-Iframe").length>0&&c("#X_Modal-Iframe").data("modal")&&c("#X_Modal-Iframe").modal("hide");c("#X_Modal-Iframe").remove();c("body").append('<div id="X_Modal-Iframe" class="modal '+(typeof f!="undefined"?f:"")+'" style="width:'+(e+40)+'px"><div class="modal-header"><a class="close" data-dismiss="modal" href="javascript:;">&times;</a><h3>'+b+'</h3></div><div class="modal-body" style="width:'+(e+40)+"px;height:"+(h+40)+'px;"><iframe frameborder="0" hspace="0" src="'+d+'" style="width:'+e+"px;height:"+
h+'px;"></iframe></div><div class="modal-footer"><a href="javascript:;" class="btn" data-dismiss="modal">\u5173\u95ed</a><a href="javascript:;" class="btn btn-primary">\u786e\u5b9a</a></div></div>');c("#X_Modal-Iframe").modal({backdrop:"static",keyboard:true});c("#X_Modal-Iframe").modal("show")}});
function XT_writePic(c,b,d,f,e,h){if(c!=""){c=decode64(c);writestr=['<img src="'+c+'"'];d>0&&writestr.push("width="+d);f!=0&&writestr.push("height="+f);b!=""&&writestr.push('alt="'+b+'"');e!=""&&writestr.push('class="'+e+'"');h!=""&&writestr.push("onerror='this.src=\""+h+"\"'");writestr.push("/>");document.write(writestr.join(" "))}}
XTTOOL={cutstr:function(c,b,d){var f=0,e=0;str_cut="";e=c.length;undefined==d&&(d="...");for(var h=0;h<e;h++){a=c.charAt(h);f++;escape(a).length>4&&f++;str_cut+=a;if(f>b)return str_cut+=d,str_cut}if(f<=b)return c},escapeString:function(c){return!c||c==""?"":c.replace(/</g,"&lt;").replace(/>/g,"&gt;")},isURL:function(c){return/([\w-]+\.)+[\w-]+.([^a-z])(\/[\w-.\/?%&=]*)?|[a-zA-Z0-9\-\.][\w-]+.([^a-z])(\/[\w-.\/?%&=]*)?/i.test(c)?true:false},byteLength:function(c){var b=c.match(/[^\x00-\x80]/g);return c.length+
(!b?0:b.length)},getMsgLength:function(c,b){if(b===undefined)b=140;var d=c.match(/[^\x00-\xff]/g);return Math.floor((b*2-c.length-(d&&d.length||0))/2)},jsMbSubstr:function(c,b){if(!c||!b)return"";var d=0,f=0,e="";for(f=0;f<c.length;f++){c.charCodeAt(f)>255?(d+=2):d++;if(d>b*2)return e;e+=c.charAt(f)}return c},getAbsoluteLocation:function(c){if(arguments.length!=1||c==null)return null;var b=$(c),d=b.offset(),f=d.top;d=d.left;b=b.height();var e=$(window).height(),h=$(document).scrollTop();return{absoluteTop:f,
absoluteLeft:d,isInView:f>=h&&f<=h+e,isLoad:f+b+200>=h&&f-400<=h+e}},objToJson:function(c){var b="{",d;for(d in c)c[d]!=null&&(b+=typeof c[d]==="object"?'"'+d+'":'+XTTOOL.objToJson(c[d])+",":'"'+d+'":"'+c[d]+'",');b+="}";return b.replace(/,}/g,"}")},getPicExtension:function(c){return c.toLowerCase().substring(c.lastIndexOf(".")+1)},empty:function(c){return void 0===c||null===c||""===c},getQueryString:function(c){if(RegExp("(^|\\?|&)"+c+"=([^&]*)(\\s|&|$)","i").test(location.href))return RegExp.$2.replace(/\+/g,
" ");return""},isIOS:function(){return/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)},getRequest:function(c,b){b=typeof b!="undefined"?b:location.href;b=b.substring(b.indexOf("?")+1,b.length).split("&");var d={};for(i=0;j=b[i];i++)d[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);b=d[c.toLowerCase()];return typeof b=="undefined"?"":b},log:function(c){window.console!==void 0&&console.log(c)}};jQuery(function(c){function b(g){g.find("div>a").html("");g.find("h4 a").html("");g.find("p").html("");g.find("input.xt-item-title").val("");g.find("input.xt-item-url").val("");g.find("input.xt-item-pic").val("");g.find("input.xt-item-price").val("");g.find("input.xt-item-type").val("");g.find("input.xt-item-key").val("");e.val("").focus()}function d(g,k){if(k){g.find("div>a").html("<img src="+k.pic_url+">");g.find("h4 a").html(k.title);g.find("p").html(k.price);g.find("input.xt-item-title").val(k.title);
g.find("input.xt-item-url").val(k.url);g.find("input.xt-item-pic").val(k.pic_url);g.find("input.xt-item-price").val(k.price);g.find("input.xt-item-type").val(k.from_type);g.find("input.xt-item-key").val(k.share_key)}}var f=tb_position;tb_position=function(){f();if(c("#TB_window #X_Items_Box_Url").length>0){var g=c("#TB_window"),k=c("#TB_ajaxContent").height()+45,l=c("#TB_ajaxContent").width()+30;if(g.size()){g.width(l).height(k);g.css({"margin-left":"-"+parseInt(l/2,10)+"px"});typeof document.body.style.maxHeight===
"undefined"||g.css({top:"200px","margin-top":"0"})}}};var e=c("#X_Items_Box_Url"),h=c("#X_Items_Box_Url_Prompt_Text");e.val()==""&&h.css("visibility","");h.click(function(){c(this).css("visibility","hidden");e.focus()});e.blur(function(){this.value==""&&h.css("visibility","")}).focus(function(){h.css("visibility","hidden")}).keydown(function(g){h.css("visibility","hidden");c(this).unbind(g)});c("#X_Items li").hover(function(){c(this).hasClass("xt-current")||c(this).addClass("xt-hover").siblings().removeClass("xt-hover")},
function(){c(this).removeClass("xt-hover")});c("#X_Items li b").click(function(){var g=c(this).parents("li:first");tb_show("\u7f16\u8f91\u5546\u54c1","#TB_inline?height=150&width=520&inlineId=X_Items_Box");e.val(g.find("input.xt-item-url").val()).focus();c("#X_Items_Box_Submit").attr("data-value",g.attr("id"))});c("#X_Items_Box_Submit").click(function(){var g=c(this);if("true"==c(this).attr("data-busy"))return false;var k=c("#"+g.attr("data-value")),l=e.val();if(l!=""&&k.find("input.xt-item-url").val()==
l){tb_remove();return false}g.attr("data-busy",true);if(XT.shareURLSupport(l))XT.shareFetch(l,function(m){g.attr("data-busy",false);if(m.code>0){alert(m.msg);return false}d(k,m.result);tb_remove()});else{alert("\u5b9d\u8d1d\u5730\u5740\u4e0d\u6b63\u786e");g.attr("data-busy",false);e.focus()}return false});c("#X_Items_Box_Clear").click(function(){b(c("#"+c("#X_Items_Box_Submit").attr("data-value")))})});